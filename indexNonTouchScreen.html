<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>DART Touch Screen</title>
    <meta name="description" content="Dart Ticket Vending Machine" />
    
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
 	<script src="http://code.jquery.com/jquery-1.10.2.js"></script>
 	<script src="http://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>

 	<!-- date and timer -->
    <script type="text/javascript" src="build/date.js"></script>

	<!-- my styles -->
    <link rel="stylesheet" type="text/css" href="css/styles.css">
 
	<script>	
	//date and timer
	$(document).ready(function(){
		startTime();
		checkMidday();
	});
		
		//counters and rates
		var childCounter = 0;
		var highschoolCounter = 0;
		var collegeCounter = 0;
		var highschoolCounter = 0;
		var adultCounter = 0;
		var seniorCounter = 0;
		var region;
		var time;
		var rates = {
			"A1A" : 2.50, //local, day, reduced
			"A1B" : 5.00, //local, day, adult
			"A2A" : 1.75, //local, midday, reduced
			"A2B" : 1.75, //local, midday, adult
			"A3A" : 1.25, //local, 2 hour, reduced
			"A3B" : 2.50, //local, 2 hour, adult
			"A4A" : 40.00, //local, monthly, reduced
			"A4B" : 80.00, //local, monthly, adult
			"A5A" : 25.00, //local, 7 day, reduced
			"A5B" : 25.00, //local, 7 day, adult
			"B1A" : 2.50, //regional, day, reduced
			"B1B" : 10.00, //regional, day, adult
			"B2A" : 3.50, //regional, midday, reduced
			"B2B" : 3.50, //regional, midday, adult
			"B3A" : 1.25, //regional, 2 hour, reduced
			"B3B" : 5.00, //regional, 2 hour, adult
			"B4A" : 40.00, //regional, monthly, reduced
			"B4B" : 160.00, //regional, monthly, adult
			"B5A" : 50.00, //regional, 7 day, reduced
			"B5B" : 50.00, //regional, 7 day, adult
		};
		
		//assign value to zone strings
		function updateRegion(regionString) {
			
			if(regionString == "Local")
				{region = "A";}
			else if(regionString == "Regional")
				{region = "B";}
			//update totals
			updateTotals();

			//hide zone, show duration 
			$("#zone").hide();
			$("#duration").show();
		}
		
		//assign value to trip duration strings
		function updateTime(timeString) {
						
			if(timeString == "Day")
				{time = "1";}
			else if(timeString == "Midday")
				{time = "2";}
			else if(timeString == "2 Hour")
				{time = "3";}
			else if(timeString == "Monthly")
				{time = "4";}
			else if(timeString == "7 Day")
				{time = "5";}
			//update totals
			updateTotals();
			
			//hide duration, show riders 
			$("#duration").hide();
			$("#riders").show();
		}
		//update counters (+/- 1, 'type')
		function updateCounters(increment, element) {
			
			if(element == "child")
			{	
				if(childCounter + increment <0)//keep counter from going below 0
				{
					return;//exit function if counter below 0
				}
				childCounter = increment + childCounter;
			}
			
			else if(element == "highschool")
			{	
				if(highschoolCounter + increment <0)//keep counter from going below 0
				{
					return;//exit function if counter below 0
				}
				highschoolCounter = increment + highschoolCounter;
			}
			
			else if(element == "college")
			{	
				if(collegeCounter + increment <0)//keep counter from going below 0
				{
					return;//exit function if counter below 0
				}
				collegeCounter = increment + collegeCounter;
			}
			
			else if(element == "adult")
			{	
				if(adultCounter + increment <0)//keep counter from going below 0
				{
					return;//exit function if counter below 0
				}
				adultCounter = increment + adultCounter;
			}
			
			else if(element == "senior")
			{	
				if(seniorCounter + increment <0)//keep counter from going below 0
				{
					return;//exit function if counter below 0
				}
				seniorCounter = increment + seniorCounter;
			}
			
			//update line total costs
			updateTotals();									
		}
		
		//fnc is called each time +/- btn is clicked or zone or trip duration changes
		function updateTotals() {
			//update display counts
			document.getElementById("childNumber").innerHTML = String(childCounter);
			document.getElementById("highschoolNumber").innerHTML = String(highschoolCounter);
			document.getElementById("collegeNumber").innerHTML = String(collegeCounter);
			document.getElementById("adultNumber").innerHTML = String(adultCounter);
			document.getElementById("seniorNumber").innerHTML = String(seniorCounter);
			
			//update ticket cost per rider
			document.getElementById("childCost").innerHTML = String(getCost(region + time + "A",childCounter));
			//update individual ticket cost display
			document.getElementById("childSingleTicket").innerHTML = String("$" + (getCost(region + time + "A",1)));
			
			//update ticket cost per rider
			document.getElementById("highschoolCost").innerHTML = String(getCost(region + time + "A",highschoolCounter));
			//update individual ticket cost display
			document.getElementById("highschoolSingleTicket").innerHTML = String("$" + (getCost(region + time + "A",1)));
			
			//update ticket cost per rider
			document.getElementById("collegeCost").innerHTML = String(getCost(region + time + "A",collegeCounter));
			//update individual ticket cost display
			document.getElementById("collegeSingleTicket").innerHTML = String("$" + (getCost(region + time + "A",1)));
			
			//update ticket cost per rider
			document.getElementById("adultCost").innerHTML = String(getCost(region + time + "B",adultCounter));
			//update individual ticket cost display
			document.getElementById("adultSingleTicket").innerHTML = String("$" + (getCost(region + time + "B",1)));
			
			//update ticket cost per rider
			document.getElementById("seniorCost").innerHTML = String(getCost(region + time + "A",seniorCounter));
			//update individual ticket cost display
			document.getElementById("seniorSingleTicket").innerHTML = String("$" + (getCost(region + time + "A",1)));
			
			//generate grand total
			var grandTot = 0;
			
			//update grand total with new numbers/data
			grandTot = grandTot + parseFloat(getCost(region + time + "A",childCounter));
			grandTot = grandTot + parseFloat(getCost(region + time + "A",highschoolCounter));
			grandTot = grandTot + parseFloat(getCost(region + time + "A",collegeCounter));
			grandTot = grandTot + parseFloat(getCost(region + time + "B",adultCounter));
			grandTot = grandTot + parseFloat(getCost(region + time + "A",seniorCounter));
			
			//convert grandTot to fixedGrandTot showing 3 decimal places
			fixedGrandTot = grandTot.toFixed(2);
			//update grand total display
			document.getElementById("totalNumber").innerHTML = String("$" + (fixedGrandTot));
		}
		
		//type = region + time + A/B
		//quantity = number of tickets per rider type
		function getCost(type, quantity){
			if (isNaN(rates[type]*quantity)){
				return "0.00";
			}
			else 
			{
				return (rates[type]*quantity).toFixed(2);
			}
		}
		function checkMidday(){
			if (parseInt(Date.today().setTimeToNow().toString("hmm")) >= 930 && parseInt(Date.today().setTimeToNow().toString("hmm"))<= 1430){
				return;//let midday show if time is between 9:30 AM and 2:30 PM
			}
			else{
				$("#midday").hide();
			}
		}
	</script>
</head>

<body>
<!-- container starts -->
    <section class="container">
    	<div id="background">
       
            <!-- Logo -->
            <div class="row">
                <div class="col-md-3">
                	<img src="imgs/dartLogoWhite.png" class="dartLogo">
                	<p id="date"></p>
                	<p id="time"></p>
                </div>
           
            	<div class="col-md-9"> 
                    <div id="zone">
                        <div class="row">
                            <div class="col-md-12">

                                <h1 class="lightSide">Are you riding</h1>

                            </div><!-- close column -->
                        </div><!-- close row -->
                        
                        <div class="row">
                            <div class="col-md-12">
                                <div class="zone right" onclick="updateRegion('Regional')" onclick="openNextAccordionPanel()">Regional</div>
                                
                                <h1 class="lightSide" id="yellowOr">or</h1>
                                
                                <div class="zone right" onclick="updateRegion('Local')">Local</div>
                            </div><!-- close column -->
                        </div><!-- close row -->
                    </div><!-- close zone -->
                    
                    
                    <div id="duration">
                        <div class="row">
                            <div class="col-md-12">
                                <h1 class="lightSide">How long will your trip last?</h1>
                            </div><!-- close column -->
                        </div><!-- close row -->
                            
                        <div class="row">
                            <div class="col-md-8"></div>
                                
                            <div class="col-md-4">
                                <div class="tripDuration" onclick="updateTime('Day')">Day</div>
                                <div class="tripDuration" id="midday" onclick="updateTime('Midday')">Midday</div>
                                <div class="tripDuration" onclick="updateTime('2 Hour')">2 Hour</div>
                                <div class="tripDuration" onclick="updateTime('Monthly')">Monthly</div>
                                <div class="tripDuration" onclick="updateTime('7 Day')">7 Day</div>
                            </div><!-- close column -->
                        </div><!-- close row -->
                    </div><!-- close duration-->
                        
                    <div id="riders">
                    	<div class="row">
	                        <div class="col-md-12">
	                            <h1 class="lightSide">Who's riding?</h1>
	                        </div><!-- close column -->
                        </div><!-- close row -->
                            
                        <!-- Child Row -->
                        <div class="row">
                            <div class="col-md-10">
                                <div class="right" onclick="updateCounters(1,'child')">
                                    <img src="imgs/plusSign.png" class="plusSignImg">
                                </div>

                                <div class="right">
                                    <div id="childNumber">0</div>
                                </div>

                                <div class="right" onclick="updateCounters(-1,'child')">
                                    <img src="imgs/minusSign.png" class="minusSignImg">
                                </div>

                                <div class="right">    
                                    <h2><sup id="childSingleTicket"></sup>Child</h2>
                                </div>
                            </div><!-- close column -->
                                
                            <div class="col-md-2">
                                <div class="right">
                                    <div id="childCost">0</div>
                                </div>
                            </div><!-- close column -->
                        </div><!-- end Child Row -->
                            
                        <!-- High School Row -->
                        <div class="row">
                            <div class="col-md-10">
                                <div class="right" onclick="updateCounters(1,'highschool')">
                                    <img src="imgs/plusSign.png" class="plusSignImg">
                                </div>

                                <div class="right">
                                    <div id="highschoolNumber">0</div>
                                </div>

                                <div class="right" onclick="updateCounters(-1,'highschool')">
                                    <img src="imgs/minusSign.png" class="minusSignImg">
                                </div>

                                <div class="right">    
                                    <h2><sup id="highschoolSingleTicket"></sup>High School</h2>
                                </div>
                            </div><!-- close column -->
                                
                            <div class="col-md-2">
                                <div class="right">
                                    <div id="highschoolCost">0</div>
                                </div>
                            </div><!-- close column -->
                        </div><!-- end High School Row -->
                
                        <!-- College Row -->
                        <div class="row">
                            <div class="col-md-10">
                                <div class="right" onclick="updateCounters(1,'college')">
                                    <img src="imgs/plusSign.png" class="plusSignImg">
                                </div>

                                <div class="right">
                                    <div id="collegeNumber">0</div>
                                </div>

                                <div class="right" onclick="updateCounters(-1,'college')">
                                    <img src="imgs/minusSign.png" class="minusSignImg">
                                </div>

                                <div class="right">    
                                    <h2><sup id="collegeSingleTicket"></sup>College/Trade School</h2>
                                </div>
                            </div><!-- close column -->
                                
                            <div class="col-md-2">
                                <div class="right">
                                    <div id="collegeCost">0</div>
                                </div>
                            </div><!-- close column -->
                        </div><!-- end College Row -->
                            
                        <!-- Adult Row -->
                        <div class="row">
                            <div class="col-md-10">
                                <div class="right" onclick="updateCounters(1,'adult')">
                                    <img src="imgs/plusSign.png" class="plusSignImg">
                                </div>

                                <div class="right">
                                    <div id="adultNumber">0</div>
                                </div>

                                <div class="right" onclick="updateCounters(-1,'adult')">
                                    <img src="imgs/minusSign.png" class="minusSignImg">
                                </div>

                                <div class="right">    
                                    <h2><sup id="adultSingleTicket"></sup>Adult</h2>
                                </div>
                            </div><!-- close column -->
                                
                            <div class="col-md-2">
                                <div class="right">
                                    <div id="adultCost">0</div>
                                </div>
                            </div><!-- close column -->
                        </div><!-- end Adult Row -->
                            
                        <!-- Senior/Disabled Row -->
                        <div class="row">
                            <div class="col-md-10">
                                <div class="right" onclick="updateCounters(1,'senior')">
                                    <img src="imgs/plusSign.png" class="plusSignImg">
                                </div>

                                <div class="right">
                                    <div id="seniorNumber">0</div>
                                </div>

                                <div class="right" onclick="updateCounters(-1,'senior')">
                                    <img src="imgs/minusSign.png" class="minusSignImg">
                                </div>

                                <div class="right">    
                                    <h2><sup id="seniorSingleTicket"></sup>Senior/Disabled</h2>
                                </div>
                            </div><!-- close column -->
                                
                            <div class="col-md-2">
                                <div class="right">
                                    <div id="seniorCost">0</div>
                                </div>
                            </div><!-- close column -->
                        </div><!-- end Senior/Disabled Row -->
                            
					</div><!-- close riders div -->

					<!-- Total Row -->
                    <div class="row">
	                    <div class="col-md-10 riderHeight totalRow">
	                		<h2 class="right" id="totalText">Total</h2>
	               		</div><!-- close column -->
                
	                    <div class="col-md-2 riderHeight totalRow">
	                        <div class="right">
	                            <div id="totalNumber">0</div>
	                        </div>
	                    </div><!-- close column -->
                    </div><!-- close total row -->
                </div><!-- close 9 point column -->
           	</div> <!-- close row -->

            <!-- Type of Currency Accepted -->
            <div class="row">
            	<div class="col-md-4">
                	<p id="currencyMessage">This machine accepts coins, bills, and credit cards.</p>
                    <p id="changeMessage">Maximum change $20.00</p>
                </div>
            </div><!-- end Type of Currency Accepted -->
            
            
            <!-- Moving Alert Bar -->
            <div class="row">
                <div class="col-md-12" id="alertBarPosition">
                        <div class="alertBar">
                        	<p class="alertBarText">Blue Line Rail Service is currently down.</p>
                        </div>
                </div><!-- close column -->
            </div><!-- end Moving Alert Bar -->
        
    	</div> <!-- close div background -->  
    </section><!-- close container -->
</body>

<script>
	function startTime() {
	    document.getElementById("date").innerHTML = Date.today().toString("MMMM dd, yyyy");
	    document.getElementById("time").innerHTML = Date.today().setTimeToNow().toString("h:mm tt");
	    var t = setTimeout(function(){startTime()},2000);
	}
</script>

</html>
